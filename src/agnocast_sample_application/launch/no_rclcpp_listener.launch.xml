<launch>
    <arg name="use_param" default="false" />

    <node pkg="agnocast_sample_application" exec="no_rclcpp_listener" name="no_rclcpp_listener_node" output="screen" unless="$(var use_param)">
        <env name="LD_PRELOAD" value="libagnocast_heaphook.so:$(env LD_PRELOAD '')" />
    </node>

    <node pkg="agnocast_sample_application" exec="no_rclcpp_listener" name="no_rclcpp_listener_node" output="screen" if="$(var use_param)">
        <env name="LD_PRELOAD" value="libagnocast_heaphook.so:$(env LD_PRELOAD '')" />
        <param name="topic_name" value="/custom_topic" />
        <param name="qos.queue_size" value="10" />
        <!-- Durability is overridden via QosOverridingOptions (rclcpp standard format) -->
        <param name="qos_overrides./custom_topic.subscription.durability" value="volatile" />
    </node>
</launch>
